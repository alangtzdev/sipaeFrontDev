<div class="page-header">
  <div class="row">
    <div class="col-xs-12 col-sm-4 text-center text-left-sm">
      <h1>Resolución para recurso de revisión</h1>
      <p><small>Detalle de resolución.</small></p>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <div class="panel colourable">
      <div class="panel-body">
        <h5 class="form-heading text-muted text-semibold text-sm">DETALLE DEL ESTUDIANTE</h5>
        <div class="row">
          <div class="col-lg-12">
            <div class="col-md-6 form-group-margin">
              <div class="row">
                <dl class="form-horizontal">
                  <dt class="col-md-6 text-right-lg text-right-md text-left-sm text-left-xs">Nombre del estudiante: </dt>
                  <dd class="col-md-6">{{entidadRecursoRevision?.estudiante?.getNombreCompleto()}}</dd>
                </dl>
              </div>
            </div>
            <div class="col-md-6 form-group-margin">
              <div class="row">
                <dl class="form-horizontal">
                  <dt class="col-md-6 text-right-lg text-right-md text-left-sm text-left-xs">Matricula: </dt>
                  <dd class="col-md-6">{{entidadRecursoRevision?.estudiante?.matricula?.matriculaCompleta}}</dd>
                </dl>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="row">
                <dl class="form-horizontal">
                  <dt class="col-md-6 text-right-lg text-right-md text-left-sm text-left-xs">Programa docente: </dt>
                  <dd class="col-md-6">{{entidadRecursoRevision?.materiaImpartida?.promocion?.programaDocente?.descripcion}}</dd>
                </dl>
              </div>
            </div>
          </div>
        </div>
        <br>
        <h5 class="form-heading text-muted text-semibold text-sm">INCONFORMIDAD</h5>
        <div class="row">
          <div class="col-lg-12">
            <div class="col-md-6 form-group-margin">
              <div class="row">
                <dl class="form-horizontal">
                  <dt class="col-md-6 text-right-lg text-right-md text-left-sm text-left-xs">Materia: </dt>
                  <dd class="col-md-6">{{entidadRecursoRevision?.materiaImpartida?.materia?.descripcion}}</dd>
                </dl>
              </div>
            </div>
            <div class="col-md-6 form-group-margin">
              <div class="row">
                <dl class="form-horizontal">
                  <dt class="col-md-6 text-right-lg text-right-md text-left-sm text-left-xs">Clave de asignatura:</dt>
                  <dd class="col-md-6">{{entidadRecursoRevision?.materiaImpartida?.materia?.clave}}</dd>
                </dl>
              </div>
            </div>
            <div class="col-md-6 form-group-margin">
              <div class="row">
                <dl class="form-horizontal">
                  <dt class="col-md-6 text-right-lg text-right-md text-left-sm text-left-xs">Titular: </dt>
                  <dd class="col-md-6">{{entidadRecursoRevision?.profesor?.getNombreCompleto()}}</dd>
                </dl>
              </div>
            </div>
            <div class="col-md-6 form-group-margin">
              <div class="row">
                <dl class="form-horizontal">
                  <dt class="col-md-6 text-right-lg text-right-md text-left-sm text-left-xs">Periodo: </dt>
                  <dd class="col-md-6">{{entidadRecursoRevision?.materiaImpartida?.periodoEscolar?.getPeriodo()}}</dd>
                </dl>
              </div>
            </div>
            <div class="col-md-6 form-group-margin">
              <div class="row">
                <dl class="form-horizontal">
                  <dt class="col-md-6 text-right-lg text-right-md text-left-sm text-left-xs">Calificación original: </dt>
                  <dd class="col-md-6">{{entidadRecursoRevision?.calificacionOriginal}}</dd>
                </dl>
              </div>
            </div>
            <div class="col-lg-12">
              <div class="row">
                <dl class="form-horizontal">

                  <dt class="col-md-3 text-right-lg text-right-md text-left-sm text-left-xs">Descripción general de la inconformidad: </dt>

                  <dd class="col-md-9">
                <textarea class="form-control" rows="6" cols="200" maxlength="500" disabled="" style="height: 80px; overflow: scroll; border:2px #e4e4e4 solid; text-align:justify;"> {{entidadRecursoRevision?.descripcion}}
                </textarea>
                  </dd>
                </dl>
              </div>
            </div>
          </div>
        </div>
        <br>
        <h5 class="form-heading text-muted text-semibold text-sm">INFORME DEL PROFESOR TITULAR</h5>
        <div class="row">
          <div class="col-md-12">
            <div class="panel" style="width:100%;height: 200px; overflow-y: scroll; margin: auto">
              <div class="panel-body">
                <div class="row">
                  <div class="col-md-3 text-center"  *ngIf="entidadRecursoRevision?.archivoInformeProfesor?.id">
                    <div class="thumbnail">
                      <i class="fa fa-file-text-o fa-5x"></i>
                      <h5 class="">{{entidadRecursoRevision?.archivoInformeProfesor?.nombre}}</h5>
                      <hr>
                      <button class="btn  btn-warning fa fa-download left" (click)="descargarArchivo(entidadRecursoRevision?.archivoInformeProfesor?.id)"></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div> <!-- col-md-12 -->
        </div>
        <br>
        <h5 class="form-heading text-muted text-semibold text-sm">RESOLUCIÓN</h5>
        <div class="col-md-6 form-group-margin">
          <div class="row">
            <div class="table-responsive">
              <div role="grid" class="dataTables_wrapper form-inline">
                <div class="table-header clearfix">
                  <div class="table-caption">Calificaciones de profesores evaluadores</div>
                </div>
                <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered dataTable no-footer" id="jq-datatables-example" aria-describedby="jq-datatables-example_info">
                  <thead>
                  <tr role="row">
                    <th
                      *ngFor="let columna of columnas"
                    >
                      {{columna.titulo}}
                    </th>
                  </thead>
                  <tbody *ngIf = "registros.length === 0">
                  <tr class="gradeA odd">
                    <th class="text-center" colspan="5">
                      No hay Registros
                    </th>
                  </tr>
                  </tbody>
                  <tbody *ngIf = "registros.length !== 0">

                  <tr class="gradeA odd" *ngFor="let registro of registros"
                      [ngClass]="{
                            'seleccionado': rowSeleccionado(registro)}"
                      (click) = "rowSeleccion(registro)"
                  >
                    <td class="text-center">{{registro?.profesor?.getNombreCompleto()}}</td>
                    <td class="text-center">{{registro?.calificacionDefinitiva}}</td>
                    <td class="text-center">{{registro?.comentariosEvaluacion}}</td>
                  </tr>

                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <form class="form-horizontal" [formGroup]="formulario">
          <div class="col-md-6 form-group-margin">
            <div class="row">
              <div class="col-md-12 form-group-margin">
                <div class="row">
                  <dl class="form-horizontal">
                    <dt class="col-md-6 text-right-lg text-right-md text-left-sm text-left-xs">Calificación definitiva: </dt>
                    <dd class="col-md-6">{{promedioFinal}}</dd>
                  </dl>
                </div>
              </div>

              <div class="col-md-12">
                <div class="row">
                  <dt class="col-md-12">Comentario final de resolución:*</dt>
                  <div class="col-md-12"
                       [ngClass]="{
                           'has-error': getControlErrors('comentariosFinales')
                          }">
                      <textarea id= "comentariosFinales" class="form-control" formControlName ="comentariosFinales" rows="6" cols="200" maxlength="500" style="height: 80px; overflow: scroll; border:2px #e4e4e4 solid; text-align:justify;">
                      </textarea>
                      <span id="helpBlock2" class="help-block " *ngIf="(getControlErrors('comentariosFinales'))" >
                              {{errorMessage(getControl('comentariosFinales'))}}
                      </span>
                  </div>
                </div>
              </div>

            </div>
          </div>

          <div class="col-lg-12">
            <div class="text-right">
              <button class="btn btn-labeled btn-success" (click)="modalConfirmarResolucion()"><span class="btn-label icon fa fa-check"></span>Resolver recurso de revisión</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-->INICIA MODAL DE CONFIRMACIONO</!-->
<modal [animation]="animation" [keyboard]="keyboard"
  class="modal-alert modal-success" 
  [backdrop]="backdrop" #modalConfirmacionResolucion>
  <modal-header>
    <i class="fa fa-check-circle"></i>
  </modal-header>
  <modal-body>
    <div class="col-md-12 col-sm-12 col-xs-12">
      ¿Est&aacute;s seguro que deseas dar resoluci&oacute;n al recurso de revisi&oacute;n?
      <br>
      <br>
    </div>
  </modal-body>
  <modal-footer>
    <div class="col-md-12 col-sm-12 col-xs-12">
      <div class="col-md-6 col-sm-6 col-xs-6">
        <button data-dismiss="modal" class="btn btn-danger" type="button" (click)="cerrarModal()">&nbsp;No</button>
      </div>
      <div class="col-md-6 col-sm-6 col-xs-6">
          <button class="btn btn-success" (click)="guardarCalificacionFinal()">&nbsp;Sí</button>
      </div>
    </div> 
  </modal-footer>
</modal>
<!-->TERMINA MODAL DE CONFIRMACIONO</!-->

